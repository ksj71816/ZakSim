<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
 <mapper namespace="zaksim.dao.QnAFileDao">
 <resultMap type="zaksim.dto.QnAFile" id="QnAFile">
 	<result property="qnaIdx" column="qna_idx" />
 	<result property="writtenDate" column="written_date" />
 </resultMap>
 
 
 
 <!-- Q&A 파일 리스트 조회 dao -->
 <select id="qnaFileList" resultMap="QnAFile" parameterType="int">
 	SELECT * FROM QnAFile
 	WHERE qna_idx=#{qnaIdx}
 </select>
 
 <!-- Q&A 파일 업로드(첨부) dao -->
 <insert id="qnaFileUpload" parameterType="zaksim.dto.QnAFile">
 	<if test="idx==0">
	 	INSERT INTO QnAFile(idx, qna_idx, original, stored)
	 	VALUES(QnAFile_SEQ.nextval, 
	 		#{qnaIdx}, #{original}, #{stored})
 	</if>
 		
 	<if test="idx!=0">
 		UPDATE QnAFile
 		SET original = #{original},
 			stored = #{stored}
 		WHERE idx = #{idx}
 	</if>
 </insert>
 
 <!-- QnA 첨부파일 다운로드 -->
 <select id="download" parameterType="int" resultMap="QnAFile">
	SELECT * FROM qnafile where qna_idx=#{qnaIdx}
 </select>

 </mapper>